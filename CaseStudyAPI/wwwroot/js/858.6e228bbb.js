"use strict";(self["webpackChunkcasestudy"]=self["webpackChunkcasestudy"]||[]).push([[858],{5572:(t,e,a)=>{a.d(e,{C:()=>l,_:()=>s});const r="/api/",s=async t=>{let e,a=d();try{let s=await fetch(`${r}${t}`,{method:"GET",headers:a});e=await s.json()}catch(s){console.log(s),e={error:`Error has occured: ${s.message}`}}return e},l=async(t,e)=>{let a,s=d();try{let l=await fetch(`${r}${t}`,{method:"POST",headers:s,body:JSON.stringify(e)});a=await l.json()}catch(l){a=l}return a},d=()=>{const t=new Headers,e=JSON.parse(sessionStorage.getItem("customer"));return e?(t.append("Content-Type","application/json"),t.append("Authorization","Bearer "+e.token)):t.append("Content-Type","application/json"),t}},7081:(t,e,a)=>{a.d(e,{p:()=>s,x:()=>r});const r=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD"}),s=t=>{let e;e=void 0===t?new Date:new Date(Date.parse(t));let a=e.getDate(),r=e.getMonth()+1,s=e.getFullYear(),l=e.getHours(),d=e.getMinutes();return d<10&&(d="0"+d),s+"-"+r+"-"+a+" "+l+":"+d}},5858:(t,e,a)=>{a.r(e),a.d(e,{default:()=>B});var r=a(9835),s=a(6970);const l={class:"text-center"},d=["src"],o=(0,r._)("div",{class:"text-h4 q-mt-md text-primary"},"Order History",-1),n={class:"text-positive text-h6 q-mt-lg q-mb-lg"},c=(0,r.Uk)("#"),u=(0,r.Uk)("Date"),m={class:"text-center"},i=["src"],w={class:"text-h5 text-center text-primary"},x={class:"text-h8 text-center text-secondary"},p=(0,r.Uk)("Name "),f=(0,r.Uk)("Quantities "),g=(0,r.Uk)("S O B"),y=(0,r.Uk)("Extended"),_=(0,r.Uk)("Sub:"),h=(0,r.Uk)("Tax(13%):"),q=(0,r.Uk)("Total:");function W(t,e,a,W,k,b){const O=(0,r.up)("q-avatar"),S=(0,r.up)("q-item-label"),U=(0,r.up)("q-item-section"),D=(0,r.up)("q-item"),v=(0,r.up)("q-list"),z=(0,r.up)("q-btn"),C=(0,r.up)("q-card-actions"),Q=(0,r.up)("q-card"),Z=(0,r.up)("q-card-section"),$=(0,r.up)("q-dialog"),I=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",l,[(0,r.Wm)(O,{class:"q-mb-md",size:"xl",square:""},{default:(0,r.w5)((()=>[(0,r._)("img",{src:"/img/icon.png"},null,8,d)])),_:1}),o,(0,r._)("div",n,(0,s.zw)(W.state.status),1)]),(0,r.Wm)(v,{separator:""},{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,{class:"q-ml-sm text-center text-h6 text-primary"},{default:(0,r.w5)((()=>[c])),_:1})])),_:1}),(0,r.Wm)(U,{class:"q-ml-sm text-center text-h6 text-primary"},{default:(0,r.w5)((()=>[u])),_:1})])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(W.state.orders,(t=>((0,r.wg)(),(0,r.j4)(D,{clickable:"",key:t.id,onClick:e=>W.selectOrder(t.id)},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{class:"text-center text-bold text-secondary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.id),1)])),_:2},1024),(0,r.Wm)(U,{class:"text-center text-bold text-secondary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(W.formatDate(t.orderDate)),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,r.Wm)($,{modelValue:W.state.selectedAnOrder,"onUpdate:modelValue":e[0]||(e[0]=t=>W.state.selectedAnOrder=t),"transition-show":"rotate","transition-hide":"rotate"},{default:(0,r.w5)((()=>[(0,r.Wm)(Q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(C,{align:"right"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(z,{flat:"",label:"X",color:"primary",class:"text-h5"},null,512),[[I]])])),_:1}),(0,r._)("div",m,[(0,r.Wm)(O,{class:"q-mb-md center",size:"x3",square:""},{default:(0,r.w5)((()=>[(0,r._)("img",{src:"/img/icon.png"},null,8,i)])),_:1})]),(0,r.Wm)(Z,null,{default:(0,r.w5)((()=>[(0,r._)("div",w," Order: #"+(0,s.zw)(W.state.orderDetails[0].orderId),1),(0,r._)("div",x," Made on: "+(0,s.zw)(W.state.orderDetails[0].dateCreated),1),(0,r.Wm)(Q,{class:"q-ma-md"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{separator:""},{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(U,{class:"q-ml-sm text-left text-h9 text-primary"},{default:(0,r.w5)((()=>[p])),_:1}),(0,r.Wm)(U,{class:"text-center q-ml-sm text-h9 text-primary"},{default:(0,r.w5)((()=>[f,(0,r.Wm)(S,null,{default:(0,r.w5)((()=>[g])),_:1})])),_:1}),(0,r.Wm)(U,{class:"text-right q-ml-sm text-h9 text-primary"},{default:(0,r.w5)((()=>[y])),_:1})])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(W.state.orderDetails,(t=>((0,r.wg)(),(0,r.j4)(D,{key:t.orderId},{default:(0,r.w5)((()=>[(0,r.Wm)(U,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.productName),1)])),_:2},1024),(0,r.Wm)(U,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.qtySold)+" "+(0,s.zw)(t.qtyOrdered)+" "+(0,s.zw)(t.qtyOnBackOrder),1)])),_:2},1024),(0,r.Wm)(U,{class:"text-right"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(W.formatCurrency(t.qtyOrdered*t.amount)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(U,{class:"q-ml-sm text-h7 text-bold text-primary text-right"},{default:(0,r.w5)((()=>[_])),_:1}),(0,r.Wm)(U,{class:"col-4 text-center"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(W.formatCurrency(W.state.sub)),1)])),_:1})])),_:1}),(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(U,{class:"q-ml-sm text-h7 text-bold text-primary text-right padding-right"},{default:(0,r.w5)((()=>[h])),_:1}),(0,r.Wm)(U,{class:"col-4 text-center"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(W.formatCurrency(W.state.tax)),1)])),_:1})])),_:1}),(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(U,{class:"q-ml-sm text-h6 text-secondary text-right padding-right"},{default:(0,r.w5)((()=>[q])),_:1}),(0,r.Wm)(U,{class:"col-4 text-center"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(W.formatCurrency(W.state.total)),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.Wm)(Z,{class:"text-center text-positive text-h6 q-mb-xs q-mt-lg q-pa-none"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(W.state.dialogStatus),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var k=a(7081),b=a(499),O=a(5572);const S={setup(){let t=(0,b.qj)({status:"",sub:0,tax:0,total:0,orders:[],dialogStatus:"",selectedAnOrder:!1,orderDetails:[],orderSelected:{}});(0,r.bv)((()=>{e()}));const e=async()=>{try{let e=JSON.parse(sessionStorage.getItem("customer"));const a=await(0,O._)(`order/${e.email}`);void 0===a.error?(t.orders=a,t.status=`loaded ${t.orders.length} orders`):t.status=a.error}catch(e){console.log(e),t.status=`Error has occured: ${e.message}`}},a=async e=>{try{let a=JSON.parse(sessionStorage.getItem("customer"));const r=await(0,O._)(`order/${e}/${a.email}`);t.orderDetails=r,t.dialogStatus="details for order",t.selectedAnOrder=!0,t.orderSelected=t.orders.find((t=>t.id===e)),t.sub=0,t.tax=0,t.total=0,t.orderDetails.forEach((e=>{t.sub+=e.amount*e.qtyOrdered,t.tax+=e.amount*e.qtyOrdered*.13,t.total+=e.amount*e.qtyOrdered*1.13}))}catch(a){console.log(a),t.status=`Error has occured: ${a.message}`}};return{state:t,formatDate:k.p,formatCurrency:k.x,selectOrder:a}}};var U=a(1639),D=a(1357),v=a(3246),z=a(490),C=a(1233),Q=a(3115),Z=a(7743),$=a(4458),I=a(1821),j=a(4455),A=a(3190),E=a(2146),H=a(9984),N=a.n(H);const T=(0,U.Z)(S,[["render",W]]),B=T;N()(S,"components",{QAvatar:D.Z,QList:v.Z,QItem:z.Z,QItemSection:C.Z,QItemLabel:Q.Z,QDialog:Z.Z,QCard:$.Z,QCardActions:I.Z,QBtn:j.Z,QCardSection:A.Z}),N()(S,"directives",{ClosePopup:E.Z})}}]);