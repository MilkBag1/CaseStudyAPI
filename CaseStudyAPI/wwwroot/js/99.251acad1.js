"use strict";(self["webpackChunkcasestudy"]=self["webpackChunkcasestudy"]||[]).push([[99],{5572:(e,t,a)=>{a.d(t,{C:()=>o,_:()=>n});const s="/api/",n=async e=>{let t,a=r();try{let n=await fetch(`${s}${e}`,{method:"GET",headers:a});t=await n.json()}catch(n){console.log(n),t={error:`Error has occured: ${n.message}`}}return t},o=async(e,t)=>{let a,n=r();try{let o=await fetch(`${s}${e}`,{method:"POST",headers:n,body:JSON.stringify(t)});a=await o.json()}catch(o){a=o}return a},r=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e}},2099:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(9835),n=a(1957);const o={class:"text-center q-mt-md"},r=(0,s._)("div",{class:"text-h4 text-primary"},"Branches",-1),l={class:"text-center"},c=["src"],d=(0,s._)("div",{class:"text-h6 text-secondary"},"Find 3 Closest Branches To:",-1),i=(0,s._)("br",null,null,-1),p={style:{height:"50vh",width:"90vw","margin-left":"5vw",border:"solid"},ref:"mapRef"};function u(e,t,a,u,h,m){const w=(0,s.up)("q-avatar"),v=(0,s.up)("q-input"),y=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",o,[r,(0,s._)("div",l,[(0,s.Wm)(w,{class:"q-mb-md",size:"100px",square:""},{default:(0,s.w5)((()=>[(0,s._)("img",{src:"/img/icon.png"},null,8,c)])),_:1})]),d,(0,s._)("div",null,[(0,s.Wm)(v,{class:"q-ma-lg text-h5",placeholder:"enter address",id:"address",modelValue:u.state.address,"onUpdate:modelValue":t[0]||(t[0]=e=>u.state.address=e)},null,8,["modelValue"]),i]),(0,s.Wm)(y,{label:"Find 3",onClick:u.genMap,class:"q-mb-md",style:{width:"30vw"}},null,8,["onClick"]),(0,s.wy)((0,s._)("div",p,null,512),[[n.F8,!0===u.state.showmap]])])}var h=a(499),m=a(5572);const w={name:"Map",setup(){const e=(0,h.iH)(null);let t=(0,h.qj)({status:"",address:"",showmap:!1,threeBranches:[]});const a=async()=>{try{t.showmap=!0;const a=window.tt;let s=`https://api.tomtom.com/search/2/geocode/${t.address}.json?key=AGTkEAL7UinnkNlBIwyYNcGwpaomB3CB`,n=await fetch(s),o=await n.json(),r=o.results[0].position.lat,l=o.results[0].position.lon;o=await(0,m._)(`branch/${r}/${l}`),t.threeBranches=o;let c=a.map({key:"AGTkEAL7UinnkNlBIwyYNcGwpaomB3CB",container:e.value,source:"vector/1/basic-main",center:[l,r],zoom:8});c.addControl(new a.FullscreenControl),c.addControl(new a.NavigationControl),t.threeBranches.forEach((e=>{let t=(new a.Marker).setLngLat([e.longitude,e.latitude]).addTo(c),s=25,n=new a.Popup({offset:s});n.setHTML(`<div id="popup">Branch#: ${e.id}</div><div>${e.street}, ${e.city}\n              <br/>${e.distance.toFixed(2)} km</div>`),t.setPopup(n)}))}catch(a){t.status=a.message}};return{mapRef:e,state:t,genMap:a}}};var v=a(1639),y=a(1357),g=a(6611),f=a(4455),k=a(9984),B=a.n(k);const C=(0,v.Z)(w,[["render",u]]),b=C;B()(w,"components",{QAvatar:y.Z,QInput:g.Z,QBtn:f.Z})}}]);